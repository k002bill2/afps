# Code Quality Rubric

LLM 기반 코드 품질 평가를 위한 상세 루브릭입니다.

## 평가 영역

### 1. Readability (가독성) - 1~5점

코드를 읽고 이해하기 쉬운 정도를 평가합니다.

| 점수 | 기준 |
|------|------|
| **5** | 탁월함 - 자체 문서화된 코드, 직관적인 구조, 복잡한 로직에 명확한 주석 |
| **4** | 우수함 - 잘 정리된 코드, 명확한 네이밍, 적절한 주석 |
| **3** | 보통 - 대체로 읽기 쉬움, 일부 불명확한 부분 존재 |
| **2** | 미흡 - 읽기 어려움, 네이밍 혼란, 주석 부족 |
| **1** | 부적합 - 이해 불가, 구조 없음, 네이밍 무의미 |

**체크리스트**:
- [ ] 변수/함수명이 목적을 명확히 설명하는가?
- [ ] 일관된 네이밍 컨벤션을 따르는가? (camelCase, PascalCase)
- [ ] 복잡한 로직에 설명 주석이 있는가?
- [ ] 함수가 단일 책임을 가지는가?
- [ ] 코드 블록이 논리적으로 그룹화되었는가?

---

### 2. Architecture (아키텍처) - 1~5점

설계 패턴 준수와 관심사 분리를 평가합니다.

| 점수 | 기준 |
|------|------|
| **5** | 탁월함 - 완벽한 패턴 준수, 명확한 레이어 분리, 확장 가능한 구조 |
| **4** | 우수함 - 패턴 준수, 적절한 분리, 일관된 구조 |
| **3** | 보통 - 대체로 패턴 준수, 일부 혼재된 관심사 |
| **2** | 미흡 - 패턴 무시, 관심사 혼재, 일관성 부족 |
| **1** | 부적합 - 구조 없음, 스파게티 코드, 패턴 위반 |

**체크리스트**:
- [ ] 프로젝트의 기존 패턴을 따르는가?
- [ ] UI 로직과 비즈니스 로직이 분리되었는가?
- [ ] 컴포넌트가 적절한 크기인가? (200줄 이하 권장)
- [ ] 의존성 방향이 올바른가? (상위→하위)
- [ ] 순환 의존성이 없는가?

**React Native 특화**:
- [ ] 컴포넌트가 표현/컨테이너 패턴을 따르는가?
- [ ] 훅이 적절히 추출되었는가?
- [ ] 서비스 레이어가 분리되었는가?

---

### 3. Maintainability (유지보수성) - 1~5점

코드 수정 및 확장의 용이성을 평가합니다.

| 점수 | 기준 |
|------|------|
| **5** | 탁월함 - 높은 테스트 커버리지, 명확한 인터페이스, 쉬운 확장 |
| **4** | 우수함 - 적절한 테스트, 명확한 API, 변경 용이 |
| **3** | 보통 - 기본 테스트 존재, 일부 하드코딩, 수정 가능 |
| **2** | 미흡 - 테스트 부족, 하드코딩 다수, 수정 위험 |
| **1** | 부적합 - 테스트 없음, 전역 상태, 변경 불가 |

**체크리스트**:
- [ ] 단위 테스트가 존재하는가?
- [ ] 매직 넘버/문자열이 상수로 추출되었는가?
- [ ] 설정값이 외부화되었는가?
- [ ] 함수가 테스트하기 쉬운 순수 함수인가?
- [ ] 에러 처리가 일관적인가?

**확장성 평가**:
- [ ] 새 기능 추가 시 기존 코드 수정이 최소화되는가?
- [ ] 인터페이스/타입을 통한 추상화가 적절한가?
- [ ] 모듈 간 결합도가 낮은가?

---

### 4. Performance (성능) - 1~5점

렌더링 효율성과 리소스 사용을 평가합니다.

| 점수 | 기준 |
|------|------|
| **5** | 탁월함 - 최적화 완벽, 불필요한 렌더링 없음, 메모이제이션 적절 |
| **4** | 우수함 - 대부분 최적화됨, 주요 성능 이슈 없음 |
| **3** | 보통 - 기본적 성능 고려, 일부 개선 여지 |
| **2** | 미흡 - 성능 고려 부족, 불필요한 렌더링 다수 |
| **1** | 부적합 - 심각한 성능 문제, 메모리 누수 가능성 |

**체크리스트**:
- [ ] 복잡한 컴포넌트에 memo()가 사용되었는가?
- [ ] 콜백에 useCallback이 사용되었는가?
- [ ] 계산값에 useMemo가 사용되었는가?
- [ ] useEffect의 의존성 배열이 올바른가?
- [ ] 불필요한 상태 업데이트가 없는가?

**React Native 특화**:
- [ ] FlatList/SectionList가 적절히 사용되었는가?
- [ ] 이미지 최적화가 되었는가?
- [ ] 네이티브 드라이버 애니메이션을 사용하는가?

---

### 5. Security (보안) - 1~5점

데이터 보호와 입력 검증을 평가합니다.

| 점수 | 기준 |
|------|------|
| **5** | 탁월함 - 완벽한 입력 검증, 민감 데이터 보호, 보안 모범 사례 준수 |
| **4** | 우수함 - 적절한 검증, 데이터 보호, 명백한 취약점 없음 |
| **3** | 보통 - 기본 검증 존재, 일부 보완 필요 |
| **2** | 미흡 - 검증 부족, 잠재적 취약점 존재 |
| **1** | 부적합 - 검증 없음, 명백한 보안 취약점 |

**체크리스트**:
- [ ] 사용자 입력이 검증되는가?
- [ ] API 키/시크릿이 코드에 하드코딩되지 않았는가?
- [ ] 민감 데이터가 로그에 출력되지 않는가?
- [ ] 적절한 에러 메시지를 사용하는가? (내부 정보 노출 방지)
- [ ] XSS/인젝션 방지가 되었는가?

**데이터 처리**:
- [ ] 개인정보가 암호화/마스킹되는가?
- [ ] 불필요한 데이터 수집이 없는가?
- [ ] 세션/토큰 관리가 안전한가?

---

## 점수 계산

### 가중치 (기본값)
| 영역 | 가중치 |
|------|--------|
| Readability | 20% |
| Architecture | 25% |
| Maintainability | 25% |
| Performance | 15% |
| Security | 15% |

### 최종 점수
```
Final Score = Σ(영역별 점수 × 가중치) / 5

예시:
- Readability: 4 × 0.20 = 0.80
- Architecture: 5 × 0.25 = 1.25
- Maintainability: 4 × 0.25 = 1.00
- Performance: 3 × 0.15 = 0.45
- Security: 5 × 0.15 = 0.75

Total = (0.80 + 1.25 + 1.00 + 0.45 + 0.75) / 5 = 0.85
```

---

## 평가 예시

```markdown
## LLM 평가 결과

### Readability: 4/5
- ✅ 변수명이 명확함 (stationName, lineColor)
- ✅ 일관된 camelCase 사용
- ⚠️ 복잡한 필터 로직에 주석 추가 권장
- ✅ 함수가 단일 책임 원칙 준수

### Architecture: 5/5
- ✅ 컴포넌트/서비스 분리 우수
- ✅ 프로젝트 패턴 준수
- ✅ 의존성 방향 올바름
- ✅ 순환 참조 없음

### Maintainability: 4/5
- ✅ 테스트 커버리지 82%
- ✅ 상수 적절히 추출됨
- ⚠️ 에러 메시지 상수화 권장
- ✅ 인터페이스 명확함

### Performance: 3/5
- ⚠️ memo() 미사용
- ⚠️ 인라인 함수 JSX에 포함
- ✅ useEffect 의존성 올바름
- ⚠️ useCallback 누락

### Security: 5/5
- ✅ 입력 검증 존재
- ✅ API 키 환경변수 사용
- ✅ 민감 데이터 로깅 없음
- ✅ 에러 메시지 안전함

**종합 점수**: 0.84 (B+)

**개선 제안**:
1. 성능 최적화: React.memo() 및 useCallback 적용
2. 복잡한 필터 로직에 설명 주석 추가
```
