# Research Task: Seoul Metro API Documentation
# LiveMetro: Investigate and document Seoul subway real-time API

id: task_res_001
name: "Seoul Metro API 문서 조사"
category: research
difficulty: moderate

input:
  description: |
    서울 지하철 실시간 도착 정보 API를 조사하고 문서화하세요.

    이 태스크는 연구/조사 능력을 평가합니다:
    - 정보 검색 및 수집
    - 출처 인용 및 근거성
    - 체계적 문서화

    결과물은 개발자가 API를 바로 사용할 수 있을 정도로 상세해야 합니다.
  requirements:
    - "API 엔드포인트 목록 및 설명"
    - "인증 방법 (API 키 발급 절차)"
    - "요청/응답 형식 (JSON 스키마)"
    - "주요 필드 설명 (역코드, 호선, 도착시간 등)"
    - "Rate limit 및 사용 제한"
    - "에러 코드 및 처리 방법"
    - "실제 사용 예시 코드 (TypeScript)"
  scope:
    must_cover:
      - "서울열린데이터광장 실시간 지하철 도착정보 API"
      - "API 키 발급 및 인증 방법"
      - "응답 데이터 구조"
    nice_to_have:
      - "다른 교통 API와의 비교"
      - "SDK 또는 라이브러리 존재 여부"
  context: |
    LiveMetro 앱에서 사용할 API를 선정하기 위한 조사입니다.
    공식 문서를 우선으로 참조하고, 모든 주장에 출처를 명시하세요.

    출처 품질 기준:
    - Tier 1: 서울열린데이터광장 공식 문서
    - Tier 2: 공식 개발자 블로그, GitHub 예제
    - Tier 3: 기술 블로그, Stack Overflow
    - Tier 4: 개인 블로그, 날짜 불명 콘텐츠
  project_vars:
    OUTPUT_FORMAT: "markdown"
    OUTPUT_PATH: "docs/api/seoul-metro-api.md"

success_criteria:
  required:
    has_citations: true
    min_sources: 3
    covers_all_requirements: true
    tier1_source_used: true
    structured_output: true
  optional:
    code_examples: true
    error_handling_docs: true
    comparison_included: true
  must_fail:
    unverified_claims: true      # 출처 없는 주장이 있으면 실패
    outdated_info: true          # 2년 이상 된 정보만 있으면 실패
    missing_core_fields: true    # 핵심 필드 누락 시 실패
  forbidden_patterns:
    - "출처 불명"
    - "확인 필요"
    - "아마도"
    - "것 같습니다"

constraints:
  max_turns: 15
  max_tool_calls: 30
  timeout_seconds: 1200
  required_tools:
    - WebSearch
    - WebFetch
    - Write
  disallowed_tools:
    - Edit  # 기존 파일 수정 불가, 새 문서만 생성

graders:
  - type: llm
    weight: 0.7
    rubric: research-agent
    criteria:
      - "근거성: 모든 사실적 주장에 출처가 있는가?"
      - "완전성: 요청한 모든 항목을 다루었는가?"
      - "정확성: API 정보가 정확하고 최신인가?"
      - "출처 품질: 공식 문서(Tier 1)를 우선 활용했는가?"
      - "구조화: 개발자가 바로 사용할 수 있게 정리되었는가?"

  - type: transcript
    weight: 0.3
    max_turns: 15
    max_tool_calls: 30
    required_tools:
      - WebSearch
      - WebFetch
    disallowed_tools:
      - Edit

max_attempts: 3
timeout_minutes: 20
tags:
  - research
  - api
  - documentation
  - seoul-metro
  - groundedness
expected_agent: general-purpose
